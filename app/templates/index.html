<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkedIn Post Formatter</title>

    <!-- Font preloading for better performance -->
    <link rel="preload" as="font"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0"
        crossorigin>
    <link rel="preload" as="font" href="https://code.ionicframework.com/ionicons/2.0.1/fonts/ionicons.ttf?v=2.0.1"
        crossorigin>
    <link rel="preload" as="font" href="https://fonts.gstatic.com/s/firasans/v17/va9C4kDNxMZdWfMOD5VvkrjJYTI.woff2"
        crossorigin>
    <link rel="preload" as="font" href="https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5Vvl4jL.woff2"
        crossorigin>
    <link rel="preload" as="font" href="https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2"
        crossorigin>
    <link rel="preload" as="font" href="https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eRhf6.woff2"
        crossorigin>
    <link rel="preload" as="font"
        href="https://fonts.gstatic.com/s/roboto/v47/KFO5CnqEu92Fr1Mu53ZEC9_Vu3r1gIhOszmkBnka.woff2" crossorigin>
    <link rel="preload" as="font"
        href="https://fonts.gstatic.com/s/roboto/v47/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMawCUBGEe.woff2" crossorigin>
    <link rel="preload" as="font"
        href="https://fonts.gstatic.com/s/roboto/v47/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3yUBA.woff2" crossorigin>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts with proper font-display settings -->
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&family=Fira+Sans:wght@400;500;700&display=swap"
        rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- Vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.3.4/dist/vue.global.js"></script>

    <!-- Font loading optimization script -->
    <script>
        // This helps with font loading optimization
        document.documentElement.className = document.documentElement.className.replace('no-js', 'js');

        // Font loading optimization
        if ("fonts" in document) {
            // Optimization for Cumulative Layout Shift
            Promise.all([
                document.fonts.load('400 1em Roboto'),
                document.fonts.load('700 1em Roboto'),
                document.fonts.load('400 1em "Fira Sans"'),
                document.fonts.load('700 1em "Fira Sans"')
            ]).then(() => {
                document.documentElement.classList.add('fonts-loaded');
            });
        }
    </script>
</head>

<body>
    <div id="app" class="container py-4">
        <header class="pb-3 mb-4 border-bottom">
            <h1 class="display-5 fw-bold text-primary">LinkedIn Post Formatter</h1>
            <p class="lead">Create eye-catching LinkedIn posts with special formatting</p>
        </header>

        <main>
            <div class="row g-4">
                <!-- Editor Section -->
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header bg-primary text-white">
                            <h2 class="h5 mb-0">Editor</h2>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <!-- Formatting Toolbar -->
                                <div class="btn-toolbar mb-3" role="toolbar">
                                    <div class="btn-group me-2" role="group">
                                        <button @click="execCommand('bold')" type="button" class="btn"
                                            :class="{'btn-outline-primary': !activeFormats.bold, 'btn-primary': activeFormats.bold}"
                                            title="Bold">
                                            <i class="fas fa-bold"></i>
                                        </button>
                                        <button @click="execCommand('italic')" type="button" class="btn"
                                            :class="{'btn-outline-primary': !activeFormats.italic, 'btn-primary': activeFormats.italic}"
                                            title="Italic">
                                            <i class="fas fa-italic"></i>
                                        </button>
                                        <button @click="execCommand('underline')" type="button" class="btn"
                                            :class="{'btn-outline-primary': !activeFormats.underline, 'btn-primary': activeFormats.underline}"
                                            title="Underline">
                                            <i class="fas fa-underline"></i>
                                        </button>
                                    </div>

                                    <div class="btn-group me-2" role="group">
                                        <select @change="execCommandWithArg('fontName', $event.target.value)"
                                            class="form-select" style="max-width: 150px;">
                                            <option value="">Font Family</option>
                                            <option value="Arial">Arial</option>
                                            <option value="Helvetica">Helvetica</option>
                                            <option value="Times New Roman">Times New Roman</option>
                                            <option value="Courier New">Courier New</option>
                                            <option value="Georgia">Georgia</option>
                                            <option value="Verdana">Verdana</option>
                                            <option value="Tahoma">Tahoma</option>
                                        </select>
                                    </div>

                                    <div class="btn-group me-2" role="group">
                                        <button @click="execCommand('insertUnorderedList')" type="button"
                                            class="btn btn-outline-primary" title="Bullet List">
                                            <i class="fas fa-list-ul"></i>
                                        </button>
                                        <button @click="execCommand('insertOrderedList')" type="button"
                                            class="btn btn-outline-primary" title="Numbered List">
                                            <i class="fas fa-list-ol"></i>
                                        </button>
                                    </div>

                                    <div class="btn-group" role="group">
                                        <button @click="showEmojiPicker = !showEmojiPicker" type="button"
                                            class="btn btn-outline-primary" title="Emoji">
                                            <i class="far fa-smile"></i>
                                        </button>
                                        <button @click="showArrowPicker = !showArrowPicker" type="button"
                                            class="btn btn-outline-primary" title="Insert Arrow">
                                            <i class="fas fa-arrow-right"></i>
                                        </button>
                                        <button @click="clearContent" type="button" class="btn btn-outline-danger"
                                            title="Clear">
                                            <i class="fas fa-trash-alt"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- Rich Text Editor -->
                                <div ref="editor" contenteditable="true" class="form-control rich-text-editor"
                                    @input="updateContent" @keyup="updateCharCount" @paste="handlePaste"
                                    style="min-height: 200px; overflow-y: auto;"></div>

                                <div class="d-flex justify-content-between mt-2">
                                    <small class="text-muted">Characters: {% raw %}{{ characterCount }}{% endraw
                                        %}/3000</small>
                                    <small class="text-muted" v-if="characterCount > 3000">Exceeds LinkedIn
                                        limit!</small>
                                </div>
                            </div>

                            <!-- Emoji Picker (simplified for now) -->
                            <div v-if="showEmojiPicker" class="card mb-3">
                                <div class="card-header bg-light">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span>Select an Emoji</span>
                                        <button @click="showEmojiPicker = false" class="btn btn-sm btn-close"></button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex flex-wrap">
                                        <button v-for="emoji in commonEmojis" @click="insertEmoji(emoji)"
                                            class="btn btn-sm btn-light m-1">
                                            {% raw %}{{ emoji }}{% endraw %}
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Arrow Picker with Categories -->
                            <div v-if="showArrowPicker" class="card mb-3">
                                <div class="card-header bg-light">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span>Select an Arrow</span>
                                        <button @click="showArrowPicker = false" class="btn btn-sm btn-close"></button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="arrow-category mb-2">
                                        <div class="arrow-category-label mb-1">Right Arrows</div>
                                        <div class="d-flex flex-wrap">
                                            <button v-for="arrow in arrows.slice(0, 21)" @click="insertArrow(arrow)"
                                                class="btn btn-sm btn-light m-1">
                                                {% raw %}{{ arrow }}{% endraw %}
                                            </button>
                                        </div>
                                    </div>
                                    <div class="arrow-category mb-2">
                                        <div class="arrow-category-label mb-1">Down Arrows</div>
                                        <div class="d-flex flex-wrap">
                                            <button v-for="arrow in arrows.slice(21, 33)" @click="insertArrow(arrow)"
                                                class="btn btn-sm btn-light m-1">
                                                {% raw %}{{ arrow }}{% endraw %}
                                            </button>
                                        </div>
                                    </div>
                                    <div class="arrow-category mb-2">
                                        <div class="arrow-category-label mb-1">Up Arrows</div>
                                        <div class="d-flex flex-wrap">
                                            <button v-for="arrow in arrows.slice(33, 44)" @click="insertArrow(arrow)"
                                                class="btn btn-sm btn-light m-1">
                                                {% raw %}{{ arrow }}{% endraw %}
                                            </button>
                                        </div>
                                    </div>
                                    <div class="arrow-category mb-2">
                                        <div class="arrow-category-label mb-1">Left Arrows</div>
                                        <div class="d-flex flex-wrap">
                                            <button v-for="arrow in arrows.slice(44, 50)" @click="insertArrow(arrow)"
                                                class="btn btn-sm btn-light m-1">
                                                {% raw %}{{ arrow }}{% endraw %}
                                            </button>
                                        </div>
                                    </div>
                                    <div class="arrow-category">
                                        <div class="arrow-category-label mb-1">Bidirectional Arrows</div>
                                        <div class="d-flex flex-wrap">
                                            <button v-for="arrow in arrows.slice(50)" @click="insertArrow(arrow)"
                                                class="btn btn-sm btn-light m-1">
                                                {% raw %}{{ arrow }}{% endraw %}
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Templates -->
                            <div class="mb-3">
                                <label class="form-label">Templates</label>
                                <select v-model="selectedTemplate" class="form-select" @change="applyTemplate">
                                    <option value="">Select a template</option>
                                    <option v-for="(template, index) in templates" :value="index">
                                        {% raw %}{{ template.name }}{% endraw %}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Preview Section -->
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header bg-success text-white">
                            <h2 class="h5 mb-0">Preview</h2>
                        </div>
                        <div class="card-body">
                            <div class="linkedin-preview p-3 border rounded mb-3">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="rounded-circle bg-secondary text-white d-flex align-items-center justify-content-center me-2"
                                        style="width: 50px; height: 50px;">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-0">Your Name</h6>
                                        <small class="text-muted">Your Title</small>
                                    </div>
                                </div>
                                <div class="formatted-content" v-html="editorContent"></div>
                                <div class="d-flex mt-3 text-muted">
                                    <div class="me-3"><i class="far fa-thumbs-up"></i> Like</div>
                                    <div class="me-3"><i class="far fa-comment"></i> Comment</div>
                                    <div><i class="fas fa-share"></i> Share</div>
                                </div>
                            </div>

                            <div class="d-grid">
                                <button @click="copyToClipboard" class="btn btn-primary">
                                    <i class="fas fa-copy me-2"></i>Copy to Clipboard
                                </button>
                                <div v-if="copySuccess" class="alert alert-success mt-2 text-center">
                                    Copied to clipboard!
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="pt-3 mt-4 text-muted border-top">
            &copy; 2023 LinkedIn Post Formatter
        </footer>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom Vue.js Script -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>